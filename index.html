<!DOCTYPE html>
<html lang="en">
<!-- Data was obtained from the following sources:
 Berkeley City Land Boundary - https://data.cityofberkeley.info/City-Government/Land_Boundary/e3zv-nuhf/about_data
 Attribute table and points GeoJSON *see note->* - https://geojson.io/#map=12.46/37.8734/-122.281 (This one I'm not sure if it keeps the features and such but it's in my data folder anyway so you can just find it there. Sorry if it just takes you to the empty geojson.io website)
 Campanille Image - https://en.advisor.travel/poi/Sather-Tower-15058 -->

 <!-- Also if the little arrow on the edge of the popup isn't on the dot, pay attention to the circle. That one is showing the correct locaiton for the landmark.-->

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Heritage Map of Berkeley</title>

  <link href="https://api.mapbox.com/mapbox-gl-js/v3.15.0/mapbox-gl.css" rel="stylesheet" />
  <script src="https://api.mapbox.com/mapbox-gl-js/v3.15.0/mapbox-gl.js"></script>

  <style>
    body {
      margin: 0;
      padding: 0;
      display: flex;
      height: 100vh;
      font-family: Georgia, Times, 'Times New Roman', serif;
    }

    #map {
      flex-grow: 1;
    }

    #sidebar {
      width: 300px;
      background: url('https://img1.advisor.travel/fs1600x1200px-Sather_Tower_11.jpg') no-repeat center center;
      background-size: cover;
      border-left: 3px solid #00008B;
      padding: 20px;
      box-sizing: border-box;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      position: relative;
      color: white;
    }

    #sidebar::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.4);
      z-index: 0;
    }

    #sidebar * {
      position: relative;
      z-index: 1;
      text-align: center;
    }

    #sidebar-content {
      display: flex;
      flex-direction: column;
      justify-content: center;
      flex-grow: 1;
    }

    h1 {
      margin-top: 0;
      font-size: 1.5em;
    }

    a {
      color: #FDB515;
      text-decoration: none;
    }

    a:hover {
      text-decoration: underline;
    }

    .author {
      font-size: 0.9em;
    }
  </style>
</head>

<body>
  <div id="map"></div>

  <div id="sidebar">
    <div id="sidebar-content">
      <h1>Heritage Map of Berkeley</h1>
      <p>
        The data for this map was obtained from the
        <a href="https://berkeleyheritage.com/berkeley_landmarks/all_landmarks.html" target="_blank">
          Berkeley Architectural Heritage Association
        </a>, also known as BAHA, which is a compiled list of all the historical landmarks in the city of Berkeley.
      </p>
      <p>Click each point to explore only a few of the many (MANY) historic landmarks and architectural sites that the
        city of Berkeley has to offer.</p>
      <p>If you'd like to see more historical landmarks, click the link above for the list!</p>
    </div>
    <p class="author">By Ariana Olvera Torres - Nov. 2025</p>
  </div>

  <script>
    mapboxgl.accessToken = 'pk.eyJ1IjoiYW9sdmVyYXQiLCJhIjoiY21oOWNjYW9qMDRvMzJpb2phdjE2OGtyZCJ9.-R05P39FkM885a1f4s53Sg';

    const map = new mapboxgl.Map({
      container: 'map',
      style: 'mapbox://styles/aolverat/cmh9cjrvl009i01ra1e8yawx9',
      center: [-122.27, 37.87],
      zoom: 12
    });

    map.on('style.load', () => {
      map.addSource('heritage-points', {
        type: 'geojson',
        data: 'https://raw.githubusercontent.com/aolverat-hub/BAHA-Map/main/data/New.map.geojson?nocache=' + Date.now()
      });

      map.addLayer({
        id: 'newpoints-layer',
        type: 'circle',
        source: 'heritage-points',
        paint: {
          'circle-radius': 6.5,
          'circle-color': '#FDB515',
          'circle-stroke-width': 1.3,
          'circle-stroke-color': '#fff'
        }
      });

      map.on('click', 'newpoints-layer', (e) => {
        const coords = [e.lngLat.lng, e.lngLat.lat];
        const props = e.features[0].properties;

        map.flyTo({
          center: coords,
          zoom: 14,
          speed: 0.8,
          curve: 1.5,
          essential: true
        });

        map.once('moveend', () => {
          const popupContent = `
            <div>
              <h3>${props.Landmark}</h3>
              <p><strong>Address:</strong> ${props.Address}</p>
              <p><strong>Architect and Date:</strong> ${props.ArchitectDate}</p>
              <p><strong>Designated:</strong> ${props.Designated}</p>
              ${props.Link ? `<p><a href="${props.Link}" target="_blank">More Information</a></p>` : ''}
              ${props.Notes ? `<p><strong>Notes:</strong> ${props.Notes}</p>` : ''}
            </div>
          `;
          new mapboxgl.Popup()
            .setLngLat(coords)
            .setHTML(popupContent)
            .addTo(map);
        });
      });

      map.on('mouseenter', 'newpoints-layer', () => {
        map.getCanvas().style.cursor = 'pointer';
      });

      map.on('mouseleave', 'newpoints-layer', () => {
        map.getCanvas().style.cursor = '';
      });

      map.addSource('berkeley-boundary', {
        type: 'geojson',
        data: 'https://raw.githubusercontent.com/aolverat-hub/BAHA-Map/refs/heads/main/data/Berkeley_Land_Boundary.geojson'
      });

      map.addLayer({
        id: 'berkeley-boundary-fill',
        type: 'fill',
        source: 'berkeley-boundary',
        layout: {},
        paint: {
          'fill-color': '#00008B',
          'fill-opacity': 0.07
        }
      });

      map.addLayer({
        id: 'berkeley-boundary-line',
        type: 'line',
        source: 'berkeley-boundary',
        layout: {},
        paint: {
          'line-color': '#00008B',
          'line-width': 3
        }
      });

    });
  </script>
</body>

</html>
